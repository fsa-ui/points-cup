<!doctype html>

<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scoreboard - Painel de Pontua√ß√£o</title>
  <style>
    :root{--bg:#0f1724;--card:#0b1220;--accent:#10b981;--muted:#9aa4b2;--danger:#ef4444}
    *{box-sizing:border-box;font-family:Inter,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial}
    body{margin:0;background:linear-gradient(180deg,#071024 0%,#081226 100%);color:#e6eef6;padding:24px}
    .wrap{max-width:960px;margin:0 auto}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    h1{font-size:20px;margin:0}
    .card{background:var(--card);padding:16px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,.6)}
    table{width:100%;border-collapse:collapse}
    th,td{padding:10px;text-align:left}
    th{color:var(--muted);font-size:13px}
    td{font-weight:600}
    .score{font-size:18px}
    .controls{display:flex;gap:8px;align-items:center}
    button{background:transparent;border:1px solid rgba(255,255,255,.06);color:inherit;padding:8px 10px;border-radius:8px;cursor:pointer}
    button.primary{background:var(--accent);border:0;color:#062018}
    button.danger{background:var(--danger);border:0}
    form.inline{display:flex;gap:8px;align-items:center}
    input,select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:transparent;color:inherit}
    .muted{color:var(--muted);font-size:13px}
    .hidden{display:none}
    .right{display:flex;gap:8px;align-items:center}
    footer{margin-top:14px;color:var(--muted);font-size:13px}
    .badge{background:rgba(255,255,255,.03);padding:6px 10px;border-radius:999px;font-size:13px}
    .editor-corner{position:fixed;right:18px;bottom:18px;z-index:999;display:flex;flex-direction:column;gap:8px}
    .corner-btn{width:52px;height:52px;border-radius:12px;background:rgba(255,255,255,.03);display:flex;align-items:center;justify-content:center;cursor:pointer}
    .corner-panel{width:360px;max-width:calc(100% - 40px)}
    .hint{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Scoreboard ‚Äî Painel de Pontua√ß√£o</h1>
      <div class="right">
        <div class="badge" id="statusBadge">Modo de edi√ß√£o: <span id="editState">Bloqueado</span></div>
      </div>
    </header><section class="card">
  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
    <div>
      <div class="muted">Campeonato</div>
      <div style="font-weight:800">Seu Campeonato</div>
    </div>
    <div class="muted">Dados salvos localmente no navegador (localStorage)</div>
  </div>

  <table id="scoreTable" class="scoreboard">
    <thead>
      <tr>
        <th>#</th>
        <th>Time</th>
        <th>Pontos</th>
        <th class="editCol">A√ß√µes</th>
      </tr>
    </thead>
    <tbody id="tbodyTeams"></tbody>
  </table>

  <div style="height:12px"></div>
  <div class="muted">Atalhos: clique no ponto para editar r√°pido no modo edi√ß√£o. Visitantes s√≥ veem a tabela e o bot√£o discreto no canto.</div>
</section>

<footer>
  Desenvolvido ‚Äî Vers√£o com editor discreto no canto. Seguran√ßa: a senha est√° verificada no cliente; para prote√ß√£o real, use backend.
</footer>

  </div>  <!-- Editor discreto no canto -->  <div class="editor-corner" id="editorCorner">
    <div class="corner-btn" id="btnLock" title="Abrir editor (requer senha)">üîí</div><div id="cornerPanel" class="card corner-panel hidden">
  <div style="display:flex;justify-content:space-between;align-items:center">
    <div>
      <div class="muted">√Årea de Edi√ß√£o</div>
      <div style="font-weight:800">Editor Seguro</div>
    </div>
    <div id="cornerControls"></div>
  </div>

  <div style="height:12px"></div>

  <div id="loginBox">
    <input id="inputPwd" type="password" placeholder="Senha" style="width:100%" />
    <div style="height:8px"></div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button id="btnPwdCancel">Fechar</button>
      <button id="btnSubmitPwd" class="primary">Entrar</button>
    </div>
  </div>

  <div id="editorBox" class="hidden">
    <form id="addForm" class="inline">
      <input id="teamName" placeholder="Nome do time" required />
      <input id="teamScore" type="number" value="0" required style="width:100px" />
      <button class="primary" type="submit">Adicionar / Atualizar</button>
    </form>

    <div style="height:12px"></div>
    <div class="muted">Importar / Exportar JSON</div>
    <div style="display:flex;gap:8px;margin-top:8px">
      <button id="btnExport">Exportar JSON</button>
      <input id="importArea" placeholder='Cole JSON aqui' style="flex:1" />
      <button id="btnImport">Importar</button>
    </div>

    <div style="height:12px"></div>
    <div style="display:flex;gap:8px">
      <button id="btnClear" class="danger">Apagar tudo</button>
      <button id="btnLogout">Sair do editor</button>
    </div>
  </div>

  <div style="height:8px"></div>
  <div class="hint">Editor persistente: ao entrar com a senha, o modo de edi√ß√£o fica **ativado e salvo** no navegador. Ningu√©m ver√° o painel salvo se n√£o souber a senha.</div>
</div>

  </div><script>
// Configura√ß√£o: senha de edi√ß√£o (fornecida pelo dono do site)
const EDIT_PASSWORD = '5887'; // NOTE: client-side; vis√≠vel no c√≥digo

// Keys
const STORAGE_TEAMS = 'scoreboard_v1';
const STORAGE_AUTH = 'scoreboard_edit_auth_v1';

// Estado
let editMode = false;
let teams = [];
let editingIndex = -1;

// Elementos
const tbody = document.getElementById('tbodyTeams');
const statusBadge = document.getElementById('editState');
const btnLock = document.getElementById('btnLock');
const cornerPanel = document.getElementById('cornerPanel');
const loginBox = document.getElementById('loginBox');
const editorBox = document.getElementById('editorBox');
const inputPwd = document.getElementById('inputPwd');
const btnSubmitPwd = document.getElementById('btnSubmitPwd');
const btnPwdCancel = document.getElementById('btnPwdCancel');
const addForm = document.getElementById('addForm');
const teamName = document.getElementById('teamName');
const teamScore = document.getElementById('teamScore');
const btnClear = document.getElementById('btnClear');
const btnExport = document.getElementById('btnExport');
const btnImport = document.getElementById('btnImport');
const importArea = document.getElementById('importArea');
const btnLogout = document.getElementById('btnLogout');
const cornerControls = document.getElementById('cornerControls');

// Inicializa√ß√£o
load();
render();
initAuthFromStorage();
updateUI();

// Event listeners
btnLock.addEventListener('click', ()=>{ cornerPanel.classList.toggle('hidden'); inputPwd.value=''; inputPwd.focus(); });
btnPwdCancel.addEventListener('click', ()=>{ cornerPanel.classList.add('hidden'); });
btnSubmitPwd.addEventListener('click', attemptLogin);
btnLogout.addEventListener('click', ()=>{ setAuth(false); alert('Saindo do modo edi√ß√£o'); updateUI(); });

addForm.addEventListener('submit', (e)=>{
  e.preventDefault();
  if(!editMode){ alert('Entre com a senha para editar'); return; }
  const name = teamName.value.trim();
  const score = Number(teamScore.value) || 0;
  if(!name) return;
  if(editingIndex >= 0){
    teams[editingIndex] = { name, score };
    editingIndex = -1;
  } else {
    teams.push({ name, score });
  }
  save(); render();
  teamName.value=''; teamScore.value='0';
});

btnClear.addEventListener('click', ()=>{
  if(!editMode) { alert('Modo edi√ß√£o necess√°rio'); return; }
  if(!confirm('Apagar todos os times?')) return;
  teams = []; save(); render();
});

btnExport.addEventListener('click', ()=>{
  const data = JSON.stringify({ teams }, null, 2);
  navigator.clipboard?.writeText(data);
  alert('JSON copiado para a √°rea de transfer√™ncia.');
});

btnImport.addEventListener('click', ()=>{
  if(!editMode) { alert('Modo edi√ß√£o necess√°rio'); return; }
  try{
    const obj = JSON.parse(importArea.value);
    if(!Array.isArray(obj.teams)) throw new Error('Formato inv√°lido');
    teams = obj.teams.map(t=>({ name: String(t.name||''), score: Number(t.score||0) }));
    save(); render(); alert('Importado com sucesso');
  }catch(err){ alert('Erro ao importar: '+err.message); }
});

// Render
function render(){
  tbody.innerHTML = '';
  teams.sort((a,b)=>b.score - a.score);
  teams.forEach((t,i)=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${i+1}</td>
      <td>${escapeHtml(t.name)}</td>
      <td class="score">${t.score}</td>
      <td class="editCol">${editMode?`<button data-i="${i}" class="btnEdit">Editar</button> <button data-i="${i}" class="btnDel">Excluir</button>`:''}</td>`;
    tbody.appendChild(tr);
  });
  // attach edit handlers
  document.querySelectorAll('.btnEdit').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const i = Number(btn.getAttribute('data-i'));
      editingIndex = i;
      teamName.value = teams[i].name;
      teamScore.value = teams[i].score;
      cornerPanel.scrollIntoView({behavior:'smooth'});
    });
  });
  document.querySelectorAll('.btnDel').forEach(btn=>{
    btn.addEventListener('click', e=>{
      const i = Number(btn.getAttribute('data-i'));
      if(confirm('Excluir time "'+teams[i].name+'"?')){ teams.splice(i,1); save(); render(); }
    });
  });
}

// Storage
function save(){ localStorage.setItem(STORAGE_TEAMS, JSON.stringify(teams)); }
function load(){ try{ const raw = localStorage.getItem(STORAGE_TEAMS); if(raw) teams = JSON.parse(raw); }catch(e){ teams = []; } }

function setAuth(val){ editMode = !!val; localStorage.setItem(STORAGE_AUTH, editMode ? '1' : '0'); updateUI(); }
function initAuthFromStorage(){ try{ const v = localStorage.getItem(STORAGE_AUTH); if(v==='1') editMode = true; else editMode = false; }catch(e){ editMode = false; } }

// Auth
function attemptLogin(){ const val = inputPwd.value.trim(); if(val === EDIT_PASSWORD){ setAuth(true); cornerPanel.classList.remove('hidden'); alert('Modo edi√ß√£o habilitado'); } else { alert('Senha incorreta'); } }

// UI update
function updateUI(){ document.querySelectorAll('.editCol').forEach(el=>el.style.display = editMode ? '' : 'none');
  editorBox.classList.toggle('hidden', !editMode);
  loginBox.classList.toggle('hidden', editMode);
  statusBadge.textContent = editMode ? 'Liberado' : 'Bloqueado';
  btnLock.textContent = editMode ? 'üîì' : 'üîí';
  // corner controls
  cornerControls.innerHTML = editMode ? '<span class="muted">Edit</span>' : '';
}

// Helpers
function escapeHtml(s){ return String(s).replace(/[&<>\\"]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;' }[c])); }

// Convenience: click on score cell increments by 1 only in edit mode (persisted)
tbody.addEventListener('click', e=>{
  const td = e.target.closest('td');
  if(!td) return;
  const row = td.parentElement; const idx = Array.from(tbody.children).indexOf(row);
  if(idx<0) return;
  if(editMode && td.classList.contains('score')){
    teams[idx].score = Number(teams[idx].score) + 1;
    save(); render();
  }
});

</script></body>
          </html>
